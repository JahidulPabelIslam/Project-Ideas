<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <ui:composition template="template.xhtml">

        <ui:define name="title">
            <h:outputText value="Create User"></h:outputText>
        </ui:define>

        <ui:define name="content">
            <h:form>

                <h:panelGrid columns="3"
                             columnClasses="rightalign,leftalign,leftalign">

                    <h:outputLabel rendered="#{personBean.theUser.type == 'Staff'}" value="Type:" for="type"/>
                    <h:selectOneMenu rendered="#{personBean.theUser.type == 'Staff'}" id="type" label="type" required="true" value="#{personBean.person.type}">
                        <f:selectItem itemValue="Staff" itemLabel="Staff" />
                        <f:selectItem itemValue="Student" itemLabel="Student" />
                        <f:selectItem itemValue="Organisation" itemLabel="Organisation" />
                        <f:selectItem itemValue="Unapproved Organisation" itemLabel="Unapproved Organisation" />
                        <f:ajax render="options" />
                    </h:selectOneMenu>
                    <h:message rendered="#{personBean.theUser.type == 'Staff'}" for="type" />

                    <h:outputLabel value="Username:" for="username"/>
                    <h:inputText id="username" label="username"
                                 required="true"
                                 value="#{personBean.person.username}" />
                    <h:message for="username" />

                    <h:outputLabel value="Password:" for="password"/>
                    <h:inputText id="password" label="password"
                                 required="true"
                                 value="#{personBean.person.password}"/>
                    <h:message for="password" />

                    <h:outputLabel value="Email Address" for="email"/>
                    <h:inputText id="email" label="email"
                                 required="true"
                                 value="#{personBean.person.email}"/>
                    <h:message for="email" />

                    <h:outputLabel value="Phone Number:" for="phoneNumber"/>
                    <h:inputText id="phoneNumber" label="phoneNumber"
                                 required="true"
                                 value="#{personBean.person.phoneNumber}" />
                    <h:message for="phoneNumber" />

                    <h:outputLabel value="First Name:" for="firstName"/>
                    <h:inputText id="firstName" label="firstName"
                                 required="true"
                                 value="#{personBean.person.firstName}"/>
                    <h:message for="firstName" />

                    <h:outputLabel value="Middle Name:" for="middleName"/>
                    <h:inputText id="middleName" label="middleName"
                                 required="true"
                                 value="#{personBean.person.middleName}" />
                    <h:message for="middleName" />

                    <h:outputLabel value="Surname:" for="surname"/>
                    <h:inputText id="surname" label="surname"
                                 required="true"
                                 value="#{personBean.person.surname}"/>
                    <h:message for="surname" />

                    <h:panelGroup id="options">
                        <h:panelGrid columns="3" rendered="#{personBean.person.type == 'Student'}">
                            <h:outputLabel value="Student ID:" for="studentID"/>
                            <h:inputText id="studentID" label="studentID"
                                         required="true"
                                         value="#{personBean.person.studentID}" />
                            <h:message for="studentID" />
                        </h:panelGrid >

                        <h:panelGrid columns="3" rendered="#{personBean.person.type == 'Organisation' or personBean.person.type == 'Unapproved Organisation'}">
                            <h:outputLabel value="Organisation Name:" for="organisationName"/>
                            <h:inputText id="organisationName" label="organisationName"
                                         required="true"
                                         value="#{personBean.person.organisationName}"/>
                            <h:message for="organisationName" />

                            <h:outputLabel value="Outline of the Organisation:" for="organisationOutline"/>
                            <h:inputText  id="organisationOutline" label="organisationOutline"
                                          required="true"
                                          value="#{personBean.person.organisationOutline}" />
                            <h:message for="organisationOutline" />

                            <h:outputLabel value="Address of the Organisation:" for="organisationAddress"/>
                            <h:inputText id="organisationAddress" label="organisationAddress"
                                         required="true"
                                         value="#{personBean.person.organisationAddress}"/>
                            <h:message for="organisationAddress" />
                        </h:panelGrid>
                    </h:panelGroup>

                    <h:commandButton rendered="#{personBean.person.id == null and (personBean.theUser == null or personBean.theUser.type == 'Staff')}" id="add" value="Add" action="#{personBean.addUser()}" />
                    <h:commandButton rendered="#{personBean.person.id != null and (personBean.person == personBean.theUser or personBean.theUser.type == 'Staff')}" id="edit" value="Edit" action="#{personBean.updatePerson(personBean.person)}" />
                    <h:commandButton rendered="#{personBean.person.id != null and (personBean.person == personBean.theUser or personBean.theUser.type == 'Staff')}" id="delete" value="Delete" action="#{personBean.deletePerson(personBean.person)}" />
                    <h:commandLink rendered="#{personBean.theUser.id == null}" value="Log In" action="LogIn" />
                </h:panelGrid>
            </h:form>
        </ui:define>
    </ui:composition>
</html>